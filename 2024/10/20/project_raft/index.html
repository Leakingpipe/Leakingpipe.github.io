<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Raft-CPP Project Report | Chengcen Fu's Blog</title><meta name="author" content="Chengcen Fu"><meta name="copyright" content="Chengcen Fu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="Raft-CPPé¡¹ç›®æ€»ç»“æŠ¥å‘Š  æ¦‚è¿°Overview è¿™ä¸ªé¡¹ç›®æ˜¯åŸºäºRaftå…±è¯†ç®—æ³•çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œè¿™ä¸ªé¡¹ç›®çš„è®¾è®¡æ—¨åœ¨å®ç°ä¸€ä¸ªå…·æœ‰é«˜å¯ç”¨æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿï¼Œç„¶åå°†RocksDBåµŒå…¥å…¶ä¸­ä½œä¸ºæŒä¹…åŒ–å­˜å‚¨åç«¯ï¼Œå¹¶é€šè¿‡Redisæ¥å£è¿›è¡Œäº¤äº’ã€‚Raftç®—æ³•è´Ÿè´£ç¡®ä¿å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼ŒRocksDBæä¾›æŒä¹…åŒ–å­˜å‚¨èƒ½åŠ›ã€‚ This project is a distributed sto">
<meta property="og:type" content="article">
<meta property="og:title" content="Raft-CPP Project Report">
<meta property="og:url" content="https://leakingpipe.github.io/2024/10/20/project_raft/index.html">
<meta property="og:site_name" content="Chengcen Fu&#39;s Blog">
<meta property="og:description" content="Raft-CPPé¡¹ç›®æ€»ç»“æŠ¥å‘Š  æ¦‚è¿°Overview è¿™ä¸ªé¡¹ç›®æ˜¯åŸºäºRaftå…±è¯†ç®—æ³•çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œè¿™ä¸ªé¡¹ç›®çš„è®¾è®¡æ—¨åœ¨å®ç°ä¸€ä¸ªå…·æœ‰é«˜å¯ç”¨æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿï¼Œç„¶åå°†RocksDBåµŒå…¥å…¶ä¸­ä½œä¸ºæŒä¹…åŒ–å­˜å‚¨åç«¯ï¼Œå¹¶é€šè¿‡Redisæ¥å£è¿›è¡Œäº¤äº’ã€‚Raftç®—æ³•è´Ÿè´£ç¡®ä¿å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼ŒRocksDBæä¾›æŒä¹…åŒ–å­˜å‚¨èƒ½åŠ›ã€‚ This project is a distributed sto">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://leakingpipe.github.io/img/butterfly-icon.png">
<meta property="article:published_time" content="2024-10-20T04:00:00.000Z">
<meta property="article:modified_time" content="2026-01-11T06:28:40.264Z">
<meta property="article:author" content="Chengcen Fu">
<meta property="article:tag" content="Projects">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://leakingpipe.github.io/img/butterfly-icon.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://leakingpipe.github.io/2024/10/20/project_raft/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="JNpDmwnAewKGivBHZAghu9VlMwccoEomxpUFE5GhUck"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?a8bbc2501837ad11ccb5cbe402f9024a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"You have switched to Traditional Chinese","cht_to_chs":"You have switched to Simplified Chinese","day_to_night":"You have switched to Dark Mode","night_to_day":"You have switched to Light Mode","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-right"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Raft-CPP Project Report',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2026-01-11 14:28:40'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/butterfly-icon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="/aboutme/"><i class="fa-fw fas fa-heart"></i><span> aboutme</span></a></div><div class="menus_item"><a class="site-page" href="/portfolio/"><i class="fa-fw fas fa-file"></i><span> portfolio</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/banner.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="Chengcen Fu's Blog"><span class="site-name">Chengcen Fu's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> categories</span></a></div><div class="menus_item"><a class="site-page" href="/aboutme/"><i class="fa-fw fas fa-heart"></i><span> aboutme</span></a></div><div class="menus_item"><a class="site-page" href="/portfolio/"><i class="fa-fw fas fa-file"></i><span> portfolio</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Raft-CPP Project Report</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-20T04:00:00.000Z" title="Created 2024-10-20 12:00:00">2024-10-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2026-01-11T06:28:40.264Z" title="Updated 2026-01-11 14:28:40">2026-01-11</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Raft-CPP Project Report"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="raft-cppé¡¹ç›®æ€»ç»“æŠ¥å‘Š"><a class="markdownIt-Anchor" href="#raft-cppé¡¹ç›®æ€»ç»“æŠ¥å‘Š"></a> Raft-CPPé¡¹ç›®æ€»ç»“æŠ¥å‘Š</h1>
<h3 id="æ¦‚è¿°overview"><a class="markdownIt-Anchor" href="#æ¦‚è¿°overview"></a> æ¦‚è¿°Overview</h3>
<p>è¿™ä¸ªé¡¹ç›®æ˜¯åŸºäºRaftå…±è¯†ç®—æ³•çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œè¿™ä¸ªé¡¹ç›®çš„è®¾è®¡æ—¨åœ¨å®ç°ä¸€ä¸ªå…·æœ‰é«˜å¯ç”¨æ€§å’Œæ•°æ®ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼æ•°æ®åº“ç³»ç»Ÿï¼Œç„¶åå°†RocksDBåµŒå…¥å…¶ä¸­ä½œä¸ºæŒä¹…åŒ–å­˜å‚¨åç«¯ï¼Œå¹¶é€šè¿‡Redisæ¥å£è¿›è¡Œäº¤äº’ã€‚Raftç®—æ³•è´Ÿè´£ç¡®ä¿å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ï¼ŒRocksDBæä¾›æŒä¹…åŒ–å­˜å‚¨èƒ½åŠ›ã€‚<br />
This project is a distributed storage system based on the <strong>Raft consensus algorithm</strong> .This project is designed to implement a distributed database system with high availability and data consistency, and then embed RocksDB into it as a persistent storage backend and interact with it through the Redis interface.The Raft algorithm is responsible for ensuring data consistency across multiple nodes, and RocksDB provides the persistent storage capability.</p>
<ol>
<li>
<p>Raftç®—æ³•<sup>[1]</sup><br />
Raftæ˜¯ä¸€ç§ç®€åŒ–çš„å…±è¯†ç®—æ³•ï¼Œç”¨äºåœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´å®ç°æ—¥å¿—å¤åˆ¶å’ŒçŠ¶æ€æœºä¸€è‡´æ€§ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é€šè¿‡Raftåè®®å¤„ç†é€‰ä¸¾ã€æ—¥å¿—åŒæ­¥ä»¥åŠæ•°æ®ä¸€è‡´æ€§çš„æ›´æ–°ã€‚<br />
èŠ‚ç‚¹çš„çŠ¶æ€æœ‰ï¼šLeaderã€Followerã€Candidateï¼Œä»–ä»¬ä¹‹é—´ååŒå·¥ä½œä»¥ç¡®ä¿æ•´ä¸ªé›†ç¾¤çš„æ•°æ®ä¸€è‡´æ€§ã€‚<br />
Raft is a simplified consensus algorithm for log replication and state machine consistency among multiple nodes. In this project, each node handles elections, log synchronization, and data consistency updates through the Raft protocol.<br />
The states of the nodes are Leader, Follower, and Candidate, and they work together to ensure data consistency across the cluster.</p>
</li>
<li>
<p>RocksDBå­˜å‚¨<br />
RocksDBæ˜¯ä¸€ä¸ªåµŒå…¥å¼ææ€§èƒ½é”®å€¼æ•°æ®åº“ï¼Œç”¨äºæ”¯æŒé«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’Œè¯»å–ã€‚<br />
åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢ï¼ŒRocksDBç”¨äºæŒä¹…åŒ–Raftæ—¥å¿—å’Œæ•°æ®å¿«ç…§ï¼Œç¡®ä¿æ•°æ®åœ¨èŠ‚ç‚¹å´©æºƒæˆ–è€…é‡å¯åä¸ä¼šä¸¢å¤±ã€‚<br />
RocksDB is an embedded performance key-value database to support efficient data storage and reading.<br />
In this project, RocksDB is used to persist Raft logs and data snapshots to ensure that data is not lost after a node crash or restart.</p>
</li>
<li>
<p>Redisæ¥å£<sup>[3]</sup><br />
æä¾›äº†å¯¹å¤–çš„æ¥å£ï¼Œå¯ä»¥é€šè¿‡Rediså‘½ä»¤è¿›è¡Œæ“ä½œã€‚<br />
åœ¨è¿™ä¸ªé¡¹ç›®é‡Œé¢Redisä¸æ˜¯ä½œä¸ºå­˜å‚¨å¼•æ“ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨RocksDBè¿›è¡Œå­˜å‚¨æ“ä½œã€‚<br />
The project provides an external interface that can be operated through Redis commands.<br />
In this project Redis is not used as a storage engine, but by calling RocksDB for storage operations.</p>
</li>
</ol>
<h3 id="å†ç¨‹process"><a class="markdownIt-Anchor" href="#å†ç¨‹process"></a> å†ç¨‹Process</h3>
<ol>
<li>
<p>é¦–å…ˆç¼–è¯‘é¡¹ç›®ï¼Œç„¶åè¿è¡Œè¿™ä¸ªRafté›†ç¾¤ï¼Œè¿™é‡Œä½¿ç”¨goreman<sup>[4]</sup>æ¥ç®¡ç†åº”ç”¨ç¨‹åºï¼Œç”¨åŒæ—¶å¯åŠ¨å¤šä¸ªè¿›ç¨‹ï¼Œä»è€Œæ¨¡æ‹Ÿé›†ç¾¤ç¯å¢ƒã€‚<br />
First compile the project and then run Raft cluster. Use goreman<sup>[4]</sup> to manage the application with multiple processes started at the same time, thus simulating a cluster environment.</p>
</li>
<li>
<p>ç”¨redis-cliä¸raft-kvé›†ç¾¤è¿›è¡Œäº¤äº’ï¼Œé€šè¿‡<code>GET</code>ï¼Œ<code>SET</code>å‘½ä»¤æµ‹è¯•é”®å€¼å­˜å‚¨åŸºæœ¬åŠŸèƒ½ã€‚ç„¶åç”¨benchmarkå·¥å…·æµ‹è¯•ç³»ç»Ÿçš„æ€§èƒ½ã€‚<br />
Interact with raft-kv cluster using <code>redis-cli</code> and test the basic functionality of key-value store through <code>GET</code>, <code>SET</code> commands. Then use benchmark tool to test the performance of the system.</p>
</li>
<li>
<p>åœ¨GitHubä¸Šä¸‹è½½RocksDB<sup>[2]</sup>æºç ï¼Œå¹¶ç¼–è¯‘ã€‚<br />
Download the RocksDB<sup>[2]</sup> source code on GitHub and compile it.</p>
</li>
<li>
<p>redis_store.hæ–‡ä»¶ä¸­å®šä¹‰äº†RedisStoreç±»çš„æ¥å£åŠå…¶æˆå‘˜å˜é‡ã€‚è¿™æ­¥ä¿®æ”¹æ–‡ä»¶ï¼Œæ·»åŠ RocksDBçš„å®ä¾‹åŒ–å’Œåˆå§‹åŒ–é€»è¾‘ï¼Œç¡®ä¿RedisStoreä¸­æ¯ä¸ªRedisæ“ä½œèƒ½å¤Ÿæ­£ç¡®åœ°æ˜ å°„åˆ°RocksDBçš„APIã€‚é¦–å…ˆå¼•å…¥ç›¸å…³å¤´æ–‡ä»¶ï¼Œç„¶åå®šä¹‰RocksDBæ•°æ®åº“æŒ‡é’ˆï¼Œå®šä¹‰Rediså’ŒRocksDBæ“ä½œçš„æ˜ å°„å‡½æ•°ã€‚<br />
The redis_store.h file defines the interfaces of the RedisStore class and its member variables. This step modifies the file to add RocksDB instantiation and initialization logic to ensure that each Redis operation in the RedisStore maps correctly to the RocksDB API. First, introduce the relevant header files, then define the RocksDB database pointer, and define the mapping functions for Redis and RocksDB operations.</p>
</li>
<li>
<p>redis_store.cppæ–‡ä»¶ä¸­å®ç°äº†å¤´æ–‡ä»¶é‡Œé¢å£°æ˜çš„æ¥å£å‡½æ•°ï¼Œç›®çš„æ˜¯å°†Rediså‘½ä»¤æ˜ å°„åˆ°RocksDP APIï¼Œå¹¶å¤„ç†RocksDBåˆå§‹åŒ–ï¼Œæ•°æ®æŒä¹…åŒ–ã€‚è¿˜éœ€è¦ä¿®æ”¹ä»å¿«ç…§æ¢å¤çš„å‡½æ•°ã€‚å½“Rafté›†ç¾¤è¾¾æˆå…±è¯†ä¹‹åï¼Œå°†ä¼šè°ƒç”¨read commitå‡½æ•°æ¥å­˜å‚¨ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹read commitå‡½æ•°ã€‚æ¥ç€ä¿®æ”¹keyså‡½æ•°ï¼Œå› ä¸ºç°åœ¨æ‰€æœ‰çš„é”®å€¼å¯¹éƒ½æ˜¯å‚¨å­˜åˆ°rocksdbï¼Œæ‰€ä»¥éœ€è¦rocksdb::Iteratorå»å®ç°ã€‚æ›´æ”¹get_snapshotï¼Œç”¨Iteratorå»rocksdbä¸­è·å–å½“å‰çŠ¶æ€ï¼Œä»¥åŠWriteBatchå°†æ•°æ®æ¢å¤åˆ°rocksdb,ä»¥ç¡®ä¿å¤šä¸ªé”®å€¼æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚è¿™æ ·å¯ä»¥é¿å…é¢‘ç¹çš„ I/O æ“ä½œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ç„¶åä¿®æ”¹CMakeLists.txtä¸­é“¾æ¥åº“çš„éƒ¨åˆ†ï¼Œé‡æ–°ç¼–è¯‘ã€‚<br />
The redis_store.cpp file implements the interface functions declared inside the header file for the purpose of mapping Redis commands to the RocksDP API and handling RocksDB initialization, data persistence. The functions for restoring from snapshots also need to be modified. When the Raft cluster reaches consensus, the <code>read commit</code> function will be called to store it, so the <code>read commit</code> function needs to be modified. Then modify the <code>keys</code> function, because now all key-value pairs are stored to rocksdb, so you need <code>rocksdb::Iterator</code> to implement. Change the <code>get_snapshot</code>, use the Iterator to get the current state from rocksdb, and WriteBatch to restore the data to rocksdb, to ensure that multiple key operations either all succeed or all fail. This avoids frequent I/O operations leading to performance degradation. Then modify the link library section in CMakeLists.txt and recompile.</p>
</li>
</ol>
<h3 id="ç»“æœresults"><a class="markdownIt-Anchor" href="#ç»“æœresults"></a> ç»“æœResults</h3>
<p>Benchmark Data:<br />
It seems it works out fine ! ğŸ˜„<br />
<img src="/img/raft01.jpg" alt="" /><br />
<img src="/img/raft02.jpg" alt="" /><br />
<img src="/img/raft03.png" alt="" /></p>
<h3 id="æ€»ç»“summary"><a class="markdownIt-Anchor" href="#æ€»ç»“summary"></a> æ€»ç»“Summary</h3>
<p>åœ¨è¿™ä¸ªé¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†å¾ˆå¤šä¾èµ–é¡¹ç®¡ç†å’Œé“¾æ¥åº“çš„æŒ‘æˆ˜ã€‚ä¸è¿‡è¿™æ¬¡è¿‡ç¨‹ä¸ºæ„å»ºä¸€ä¸ªåˆ†å¸ƒå¼ã€é«˜æ€§èƒ½çš„æ•°æ®åº“ç³»ç»Ÿæ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚<br />
During the course of this project, many dependency management and linked library challenges were encountered. But this process laid a solid foundation for me to build a distributed, high-performance database system.</p>
<p>å‚è€ƒæ–‡çŒ®ï¼š<br />
[1] Ongaro, D. and Ousterhout, J., 2014. In search of an understandable consensus algorithm. In 2014 USENIX annual technical conference (USENIX ATC 14) (pp. 305-319).<br />
[2] <a target="_blank" rel="noopener" href="https://rocksdb.org">RocksDBå®˜æ–¹æ–‡æ¡£</a><br />
[3] <a target="_blank" rel="noopener" href="https://redis.io">Rediså®˜æ–¹æ–‡æ¡£</a><br />
[4] <a target="_blank" rel="noopener" href="https://github.com/mattn/goreman">Goreman</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://leakingpipe.github.io">Chengcen Fu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://leakingpipe.github.io/2024/10/20/project_raft/">https://leakingpipe.github.io/2024/10/20/project_raft/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Projects/">Projects</a></div><div class="post_share"><div class="social-share" data-image="/img/butterfly-icon.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2025/01/16/project_mq/" title="Message Queue Project Report"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Message Queue Project Report</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2025/01/16/project_mq/" title="Message Queue Project Report"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-16</div><div class="title">Message Queue Project Report</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Chengcen Fu</div><div class="author-info__description">Sharing thoughts on CS, AI and Animation. Ryland / Leakingpipe.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">13</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Leakingpipe"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Leakingpipe" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:fuchengcen2124@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://space.bilibili.com/1155197576?spm_id_from=333.1007.0.0" target="_blank" title="Bilibili"><i class="fa-solid fa-tv" style="color: #0087BD;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">Latest update:20260111</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#raft-cpp%E9%A1%B9%E7%9B%AE%E6%80%BB%E7%BB%93%E6%8A%A5%E5%91%8A"><span class="toc-number">1.</span> <span class="toc-text"> Raft-CPPé¡¹ç›®æ€»ç»“æŠ¥å‘Š</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0overview"><span class="toc-number">1.0.1.</span> <span class="toc-text"> æ¦‚è¿°Overview</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%86%E7%A8%8Bprocess"><span class="toc-number">1.0.2.</span> <span class="toc-text"> å†ç¨‹Process</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%9Cresults"><span class="toc-number">1.0.3.</span> <span class="toc-text"> ç»“æœResults</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93summary"><span class="toc-number">1.0.4.</span> <span class="toc-text"> æ€»ç»“Summary</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/11/techindex_001/" title="ã€Tech Indexã€‘ LevelDB">ã€Tech Indexã€‘ LevelDB</a><time datetime="2026-01-11T04:00:00.000Z" title="Created 2026-01-11 12:00:00">2026-01-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/conceptsreview_001/" title="ã€Concepts Reviewã€‘ Rasterization">ã€Concepts Reviewã€‘ Rasterization</a><time datetime="2026-01-10T04:00:00.000Z" title="Created 2026-01-10 12:00:00">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/studynotes_3dmath_01/" title="ã€Graphicsã€‘ã€Š3Dæ•°å­¦åŸºç¡€ï¼šå›¾å½¢ä¸æ¸¸æˆå¼€å‘ã€‹Review ç¬¬äºŒ~ä¸‰ç« ">ã€Graphicsã€‘ã€Š3Dæ•°å­¦åŸºç¡€ï¼šå›¾å½¢ä¸æ¸¸æˆå¼€å‘ã€‹Review ç¬¬äºŒ~ä¸‰ç« </a><time datetime="2026-01-10T04:00:00.000Z" title="Created 2026-01-10 12:00:00">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/10/studynotes_3dmath_02/" title="ã€Graphicsã€‘ã€Š3Dæ•°å­¦åŸºç¡€ï¼šå›¾å½¢ä¸æ¸¸æˆå¼€å‘ã€‹Review ç¬¬äºŒ~ä¸‰ç« ">ã€Graphicsã€‘ã€Š3Dæ•°å­¦åŸºç¡€ï¼šå›¾å½¢ä¸æ¸¸æˆå¼€å‘ã€‹Review ç¬¬äºŒ~ä¸‰ç« </a><time datetime="2026-01-10T04:00:00.000Z" title="Created 2026-01-10 12:00:00">2026-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/plan2026/" title="ã€Journalã€‘2026 Study plan">ã€Journalã€‘2026 Study plan</a><time datetime="2025-12-31T04:32:00.000Z" title="Created 2025-12-31 12:32:00">2025-12-31</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2026 By Chengcen Fu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">By ChengcenFu</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
  }

  btf.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="false" data-text="Leakingpipe" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>